(function(l,p,i){var e=(l.SVGAngle||p.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML"),m,b,c=15,j="http://www.w3.org/2000/svg";var o=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");function t(u){if(l.event&&l.event.contentOverflow!==i){return{x:l.event.offsetX,y:l.event.offsetY}}if(u.offsetX!==i&&u.offsetY!==i){return{x:u.offsetX,y:u.offsetY}}var v=u.target.parentNode.parentNode;return{x:u.layerX-v.offsetLeft,y:u.layerY-v.offsetTop}}function g(z,v,y){z=p.createElementNS(j,z);for(var x in v){z.setAttribute(x,v[x])}if(Object.prototype.toString.call(y)!="[object Array]"){y=[y]}var w=0,u=(y[0]&&y.length)||0;for(;w<u;w++){z.appendChild(y[w])}return z}if(e=="SVG"){b=g("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[g("defs",{},g("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[g("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),g("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),g("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),g("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),g("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),g("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),g("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),g("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),g("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),g("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]);m=g("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[g("defs",{},[g("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[g("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),g("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),g("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[g("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),g("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),g("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),g("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])}else{if(e=="VML"){b=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join("");m=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join("");if(!p.namespaces.v){p.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML")}}}function f(A){var y,F,w,x,v;var z=(A.h%360)/60;v=A.v*A.s;x=v*(1-Math.abs(z%2-1));y=F=w=A.v-v;z=~~z;y+=[v,x,0,0,x,v][z];F+=[x,v,v,x,0,0][z];w+=[0,0,x,v,v,x][z];var u=Math.floor(y*255);var D=Math.floor(F*255);var E=Math.floor(w*255);return{r:u,g:D,b:E,hex:"#"+(16777216|E|(D<<8)|(u<<16)).toString(16).slice(1)}}function r(w){var A=w.r;var z=w.g;var u=w.b;if(w.r>1||w.g>1||w.b>1){A/=255;z/=255;u/=255}var y,x,v,B;v=Math.max(A,z,u);B=v-Math.min(A,z,u);y=(B==0?null:v==A?(z-u)/B+(z<u?6:0):v==z?(u-A)/B+2:(A-z)/B+4);y=(y%6)*60;x=B==0?0:B/v;return{h:y,s:x,v:v}}function s(u,w,v){return function(x){x=x||l.event;var y=t(x);u.h=y.y/w.offsetHeight*360+c;var z=f({h:u.h,s:1,v:1});var A=f({h:u.h,s:u.s,v:u.v});v.style.backgroundColor=z.hex;u.callback&&u.callback(A.hex,{h:u.h-c,s:u.s,v:u.v},{r:A.r,g:A.g,b:A.b},i,y)}}function k(u,v){return function(x){x=x||l.event;var y=t(x),z=v.offsetWidth,w=v.offsetHeight;u.s=y.x/z;u.v=(w-y.y)/w;var A=f(u);u.callback&&u.callback(A.hex,{h:u.h-c,s:u.s,v:u.v},{r:A.r,g:A.g,b:A.b},y)}}var q=0;function a(B,z,G){if(!(this instanceof a)){return new a(B,z,G)}this.h=0;this.s=1;this.v=1;if(!G){var v=B;v.innerHTML=o;this.slideElement=v.getElementsByClassName("slide")[0];this.pickerElement=v.getElementsByClassName("picker")[0];var u=v.getElementsByClassName("slide-indicator")[0];var y=v.getElementsByClassName("picker-indicator")[0];a.fixIndicators(u,y);this.callback=function(L,I,H,K,J){a.positionIndicators(u,y,J,K);z(L,I,H)}}else{this.callback=G;this.pickerElement=z;this.slideElement=B}if(e=="SVG"){var D=b.cloneNode(true);var A=m.cloneNode(true);var x=D.getElementsByTagName("defs")[0].firstChild;var w=D.getElementsByTagName("rect")[0];x.id="gradient-hsv-"+q;w.setAttribute("fill","url(#"+x.id+")");var F=A.getElementsByTagName("defs")[0];var E=[F.firstChild,F.lastChild];var C=A.getElementsByTagName("rect");E[0].id="gradient-black-"+q;E[1].id="gradient-white-"+q;C[0].setAttribute("fill","url(#"+E[1].id+")");C[1].setAttribute("fill","url(#"+E[0].id+")");this.slideElement.appendChild(D);this.pickerElement.appendChild(A);q++}else{this.slideElement.innerHTML=b;this.pickerElement.innerHTML=m}n(this.slideElement,"click",s(this,this.slideElement,this.pickerElement));n(this.pickerElement,"click",k(this,this.pickerElement));h(this,this.slideElement,s(this,this.slideElement,this.pickerElement));h(this,this.pickerElement,k(this,this.pickerElement))}function n(u,v,w){if(u.attachEvent){u.attachEvent("on"+v,w)}else{if(u.addEventListener){u.addEventListener(v,w,false)}}}function h(u,w,x){var v=false;n(w,"mousedown",function(y){v=true});n(w,"mouseup",function(y){v=false});n(w,"mouseout",function(y){v=false});n(w,"mousemove",function(y){if(v){x(y)}})}a.hsv2rgb=function(u){var v=f(u);delete v.hex;return v};a.hsv2hex=function(u){return f(u).hex};a.rgb2hsv=r;a.rgb2hex=function(u){return f(r(u)).hex};a.hex2hsv=function(u){return r(a.hex2rgb(u))};a.hex2rgb=function(u){return{r:parseInt(u.substr(1,2),16),g:parseInt(u.substr(3,2),16),b:parseInt(u.substr(5,2),16)}};function d(w,z,y,A){w.h=z.h%360;w.s=z.s;w.v=z.v;var B=f(w);var x={y:(w.h*w.slideElement.offsetHeight)/360,x:0};var u=w.pickerElement.offsetHeight;var v={x:w.s*w.pickerElement.offsetWidth,y:u-w.v*u};w.pickerElement.style.backgroundColor=f({h:w.h,s:1,v:1}).hex;w.callback&&w.callback(A||B.hex,{h:w.h,s:w.s,v:w.v},y||{r:B.r,g:B.g,b:B.b},v,x);return w}a.prototype.setHsv=function(u){return d(this,u)};a.prototype.setRgb=function(u){return d(this,r(u),u)};a.prototype.setHex=function(u){return d(this,a.hex2hsv(u),i,u)};a.positionIndicators=function(w,x,v,u){if(v){w.style.top=(v.y-w.offsetHeight/2)+"px"}if(u){x.style.top=(u.y-x.offsetHeight/2)+"px";x.style.left=(u.x-x.offsetWidth/2)+"px"}};a.fixIndicators=function(u,v){v.style.pointerEvents="none";u.style.pointerEvents="none"};l.ColorPicker=a})(window,window.document);