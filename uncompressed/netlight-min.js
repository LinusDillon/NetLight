(function(){var a={};var g=document.getElementById("lightEnabled");function i(z,y){if(z.classList){z.classList.add(y)}else{z.className+=" "+y}}function k(z,y){if(z.classList){z.classList.remove(y)}else{z.className=z.className.replace(new RegExp("(^|\\b)"+y.split(" ").join("|")+"(\\b|$)","gi")," ")}}function r(B,A){if(B.classList){B.classList.toggle(A)}else{var z=B.className.split(" ");var y=z.indexOf(A);if(y>=0){z.splice(y,1)}else{z.push(A)}B.className=z.join(" ")}}function x(z,y){if(y){z.innerHTML="On";i(z,"button-on");i(z,"pure-button-active")}else{z.innerHTML="Off";k(z,"button-on");k(z,"pure-button-active")}}function q(y){return y.classList.contains("button-on")}function b(y){var z=y.split(",");document.getElementById("mqtt_server").value=z[1];document.getElementById("mqtt_port").value=z[2];document.getElementById("mqtt_idx").value=z[3];document.getElementById("flashSizeReal").value=z[4];document.getElementById("flashSizeCompiler").value=z[5];document.getElementById("freeHeap").value=z[6];document.getElementById("sketchSize").value=z[7];document.getElementById("sketchFree").value=z[8]}function j(){var y="Info";y+=","+document.getElementById("mqtt_server").value;y+=","+document.getElementById("mqtt_port").value;y+=","+document.getElementById("mqtt_idx").value;y+=","+document.getElementById("flashSizeReal").value;y+=","+document.getElementById("flashSizeCompiler").value;y+=","+document.getElementById("freeHeap").value;y+=","+document.getElementById("sketchSize").value;y+=","+document.getElementById("sketchFree").value;return y}function p(){var y="State";y+=","+(q(g)?1:0);y+=","+document.getElementById("lightLevel").value;return y}function l(y){return"anim"+y}function m(z){var A=l(z);var y=""+z;y+=","+a[A+"_color1"];y+=","+a[A+"_color2"];y+=","+document.getElementById("anim0_time1_min").value;y+=","+document.getElementById("anim0_time1_max").value;y+=","+document.getElementById("anim0_time2_min").value;y+=","+document.getElementById("anim0_time2_max").value;y+=","+document.getElementById("anim0_effect").value;return y}function s(y){var z=y.split(",");x(g,parseInt(z[1],10));document.getElementById("lightLevel").value=z[2]}function h(z){var y=z.split("\n");var A=y[0].split(",");colorPicker1.setHex(A[1]);colorPicker2.setHex(A[2]);document.getElementById("anim0_time1_min").value=A[3];document.getElementById("anim0_time1_max").value=A[4];document.getElementById("anim0_time2_min").value=A[5];document.getElementById("anim0_time2_max").value=A[6];document.getElementById("anim0_effect").value=A[7]}function c(){if(this.status>=200&&this.status<400){console.log("RESPONSE: "+this.responseText);b(this.responseText)}else{console.log("Server responded with status: "+this.status)}}function u(){if(this.status>=200&&this.status<400){console.log("RESPONSE: "+this.responseText);s(this.responseText)}else{console.log("Server responded with status: "+this.status)}}function t(){if(this.status>=200&&this.status<400){console.log("RESPONSE: "+this.responseText);h(this.responseText)}else{console.log("Server responded with status: "+this.status)}}function f(){console.log("Connection error.")}function e(){var y=new XMLHttpRequest();y.open("GET","info");y.onload=c;y.onerror=f;y.send()}function o(){var y=new XMLHttpRequest();y.open("GET","status");y.onload=u;y.onerror=f;y.send()}function n(){var y=p();var z=new XMLHttpRequest();z.open("PUT","status",true);z.setRequestHeader("Content-Type","text/csv");z.onload=u;z.onerror=f;console.log("REQUEST: "+y);z.send(y)}function v(){var y=new XMLHttpRequest();y.open("GET","anim");y.onload=t;y.onerror=f;y.send()}function d(z){var y=m(z);var A=new XMLHttpRequest();A.open("PUT","anim",true);A.setRequestHeader("Content-Type","text/csv");A.onerror=f;console.log("REQUEST: "+y);A.send(y)}function w(A){var B=l(A);document.getElementById(B+"_apply").addEventListener("click",function(){d(A)});var z=new ColorPicker(document.getElementById(B+"_color1"),function(C){a[B+"_color1"]=C});var y=new ColorPicker(document.getElementById(B+"_color2"),function(C){a[B+"_color2"]=C});a[B+"_color1"]="#000000";a[B+"_color2"]="#000000"}document.getElementById("lightEnabled").addEventListener("click",function(){x(g,!q(g));n()});document.getElementById("lightLevel").addEventListener("change",function(){n()});w(0);w(1);o();v();e()}());