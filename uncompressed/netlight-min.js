(function(){var f=document.getElementById("current_lightEnabled");var h;var l;var c=new ColorPicker(document.getElementById("current_color1"),function(u){h=u});var a=new ColorPicker(document.getElementById("current_color2"),function(u){l=u});function i(v,u){if(v.classList){v.classList.add(u)}else{v.className+=" "+u}}function k(v,u){if(v.classList){v.classList.remove(u)}else{v.className=v.className.replace(new RegExp("(^|\\b)"+u.split(" ").join("|")+"(\\b|$)","gi")," ")}}function q(x,w){if(x.classList){x.classList.toggle(w)}else{var v=x.className.split(" ");var u=v.indexOf(w);if(u>=0){v.splice(u,1)}else{v.push(w)}x.className=v.join(" ")}}function t(v,u){if(u){v.innerHTML="On";i(v,"button-on");i(v,"pure-button-active")}else{v.innerHTML="Off";k(v,"button-on");k(v,"pure-button-active")}}function p(u){return u.classList.contains("button-on")}function b(u){var v=u.split(",");document.getElementById("mqtt_server").value=v[1];document.getElementById("mqtt_port").value=v[2];document.getElementById("mqtt_idx").value=v[3];document.getElementById("flashSizeReal").value=v[4];document.getElementById("flashSizeCompiler").value=v[5];document.getElementById("freeHeap").value=v[6];document.getElementById("sketchSize").value=v[7];document.getElementById("sketchFree").value=v[8]}function j(){var u="Info";u+=","+document.getElementById("mqtt_server").value;u+=","+document.getElementById("mqtt_port").value;u+=","+document.getElementById("mqtt_idx").value;u+=","+document.getElementById("flashSizeReal").value;u+=","+document.getElementById("flashSizeCompiler").value;u+=","+document.getElementById("freeHeap").value;u+=","+document.getElementById("sketchSize").value;u+=","+document.getElementById("sketchFree").value;return u}function o(){var u="State";u+=","+(p(f)?1:0);u+=","+document.getElementById("current_lightLevel").value;u+=","+h;u+=","+l;u+=","+document.getElementById("current_time1_min").value;u+=","+document.getElementById("current_time1_max").value;u+=","+document.getElementById("current_time2_min").value;u+=","+document.getElementById("current_time2_max").value;u+=","+document.getElementById("current_effect").value;return u}function r(u){var v=u.split(",");t(f,parseInt(v[1],10));document.getElementById("current_lightLevel").value=v[2];c.setHex(v[3]);a.setHex(v[4]);document.getElementById("current_time1_min").value=v[5];document.getElementById("current_time1_max").value=v[6];document.getElementById("current_time2_min").value=v[7];document.getElementById("current_time2_max").value=v[8];document.getElementById("current_effect").value=v[9]}function d(){if(this.status>=200&&this.status<400){console.log("RESPONSE: "+this.responseText);b(this.responseText)}else{console.log("Server responded with status: "+this.status)}}function s(){if(this.status>=200&&this.status<400){console.log("RESPONSE: "+this.responseText);r(this.responseText)}else{console.log("Server responded with status: "+this.status)}}function g(){console.log("Connection error.")}function e(){var u=new XMLHttpRequest();u.open("GET","info");u.onload=d;u.onerror=g;u.send()}function n(){var u=new XMLHttpRequest();u.open("GET","status");u.onload=s;u.onerror=g;u.send()}function m(){var v=o();var u=new XMLHttpRequest();u.open("PUT","status",true);u.setRequestHeader("Content-Type","text/csv");u.onload=s;u.onerror=g;console.log("REQUEST: "+v);u.send(v)}document.getElementById("current_lightEnabled").addEventListener("click",function(){t(f,!p(f));m()});document.getElementById("apply").addEventListener("click",m);n();e()}());